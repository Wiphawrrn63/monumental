const LangService = function ($q, localStorageService) {
  const service = {
    getNativeLanguages,
    getUserLanguages,
    setUserLanguages,
  };

  const languagesList = {
    Q889: ['ps'],
    Q222: ['sq'],
    Q262: ['ar'],
    Q228: ['ca'],
    Q916: ['pt'],
    Q781: ['en'],
    Q414: ['es'],
    Q399: ['hy'],
    Q408: ['en'],
    Q40: ['de'],
    Q227: ['az'],
    Q398: ['ar'],
    Q902: ['bn'],
    Q244: ['en'],
    Q184: ['ru', 'be'],
    Q31: ['nl', 'fr', 'de'],
    Q242: ['en'],
    Q962: ['fr'],
    Q917: ['dz'],
    Q750: ['es'],
    Q225: ['hr', 'sr', 'bs'],
    Q963: ['en'],
    Q155: ['pt'],
    Q921: ['en'],
    Q219: ['bg'],
    Q965: ['fr'],
    Q967: ['fr', 'en'],
    Q424: ['km'],
    Q1009: ['fr', 'en'],
    Q1011: ['pt'],
    Q929: ['fr'],
    Q657: ['fr', 'ar'],
    Q298: ['es'],
    Q739: ['es'],
    Q970: ['fr', 'ar'],
    Q800: ['es'],
    Q224: ['hr'],
    Q241: ['es'],
    Q229: ['tr', 'el'],
    Q213: ['cs'],
    Q1008: ['fr'],
    Q974: ['fr'],
    Q977: ['fr', 'ar'],
    Q784: ['en'],
    Q786: ['es'],
    Q574: ['pt'],
    Q736: ['es'],
    Q79: ['ar'],
    Q792: ['es'],
    Q983: ['fr', 'es', 'pt'],
    Q986: ['en', 'ar', 'ti'],
    Q191: ['et'],
    Q115: ['am'],
    Q702: ['en'],
    Q712: ['en'],
    Q33: ['fi', 'sv'],
    Q142: ['fr'],
    Q1000: ['fr'],
    Q1005: ['en'],
    Q230: ['ka'],
    Q183: ['de'],
    Q117: ['en'],
    Q41: ['el'],
    Q769: ['en'],
    Q774: ['es'],
    Q1006: ['fr'],
    Q1007: ['pt'],
    Q734: ['en'],
    Q790: ['fr', 'ht'],
    Q783: ['es'],
    Q28: ['hu'],
    Q189: ['is'],
    Q668: ['hi', 'en'],
    Q252: ['id'],
    Q794: ['fa'],
    Q796: ['ar', 'ku'],
    Q27: ['en'],
    Q801: ['he'],
    Q38: ['it'],
    Q766: ['en'],
    Q17: ['ja'],
    Q810: ['ar'],
    Q232: ['kk'],
    Q114: ['en', 'sw'],
    Q29999: ['nl'],
    Q710: ['en'],
    Q817: ['ar'],
    Q813: ['ru', 'ky'],
    Q819: ['lo'],
    Q211: ['lv'],
    Q822: ['ar'],
    Q1013: ['en', 'st'],
    Q1014: ['en'],
    Q1016: ['ar'],
    Q347: ['de'],
    Q37: ['lt'],
    Q32: ['fr', 'de', 'lb'],
    Q1019: ['fr', 'mg'],
    Q1020: ['en', 'ny'],
    Q833: ['en'],
    Q826: ['dv'],
    Q912: ['fr'],
    Q233: ['en', 'mt'],
    Q709: ['en', 'mh'],
    Q1025: ['ar'],
    Q1027: ['fr', 'en'],
    Q96: ['es'],
    Q217: ['mo'],
    Q235: ['fr'],
    Q711: ['mn'],
    Q236: ['hr', 'sq', 'sr', 'bs'],
    Q1028: ['ar'],
    Q1029: ['pt'],
    Q836: ['my'],
    Q1030: ['en'],
    Q697: ['en', 'na'],
    Q837: ['ne'],
    Q664: ['en', 'mi'],
    Q811: ['es'],
    Q1032: ['fr'],
    Q1033: ['en'],
    Q423: ['ko'],
    Q20: ['nn', 'nb'],
    Q842: ['ar'],
    Q843: ['ur', 'en'],
    Q695: ['en'],
    Q804: ['es'],
    Q691: ['en', 'ho', 'tpi'],
    Q733: ['es', 'gn'],
    Q419: ['es', 'ay'],
    Q928: ['en'],
    Q36: ['pl'],
    Q45: ['pt'],
    Q846: ['ar'],
    Q221: ['mk'],
    Q971: ['fr'],
    Q218: ['ro'],
    Q159: ['ru'],
    Q1037: ['fr', 'en', 'rw'],
    Q763: ['en'],
    Q760: ['en'],
    Q757: ['es', 'en'],
    Q683: ['en', 'sm'],
    Q238: ['it'],
    Q1039: ['pt'],
    Q1041: ['fr'],
    Q403: ['sr'],
    Q1042: ['fr', 'en', 'crs'],
    Q1044: ['en'],
    Q334: ['en', 'ta', 'ms'],
    Q214: ['sk'],
    Q215: ['sl'],
    Q685: ['en'],
    Q1045: ['so', 'ar'],
    Q258: ['en', 'zu'],
    Q884: ['ko'],
    Q958: ['en'],
    Q29: ['es'],
    Q854: ['ta', 'si'],
    Q1049: ['en', 'ar'],
    Q730: ['nl'],
    Q1050: ['en', 'ss'],
    Q34: ['fi', 'yi', 'sv'],
    Q39: ['fr', 'de', 'it'],
    Q858: ['ar'],
    Q863: ['tg'],
    Q924: ['en', 'sw'],
    Q869: ['th'],
    Q778: ['en'],
    Q945: ['fr'],
    Q678: ['en', 'to'],
    Q754: ['en'],
    Q948: ['ar'],
    Q43: ['tr'],
    Q874: ['ru', 'tk'],
    Q672: ['en', 'tvl'],
    Q1036: ['en', 'sw'],
    Q212: ['uk'],
    Q878: ['ar'],
    Q145: ['en'],
    Q30: ['en'],
    Q77: ['es'],
    Q265: ['uz'],
    Q686: ['fr', 'en', 'bi'],
    Q717: ['es'],
    Q881: ['vi'],
    Q805: ['ar'],
    Q953: ['en'],
    Q954: ['en'],
  };
  let userLanguages = [];

  return service;

  //

  function getNativeLanguages(code) {
    return languagesList[code];
  }

  function getUserLanguages() {
    if (userLanguages.length) { return angular.copy(userLanguages); }

    const ls = localStorageService.get('languages');
    let def = navigator.language || navigator.userLanguage;
    def = def.split('-')[0];

    userLanguages = ls || [def];
    if (!userLanguages.includes('en')) { userLanguages.push('en'); }
    return angular.copy(userLanguages);
  }

  function setUserLanguages(langs) {
    localStorageService.set('languages', langs);
    userLanguages = langs;
    return $q.when(true);
  }
};

export default () => {
  angular
    .module('monumental')
    .factory('langService', LangService);
};
